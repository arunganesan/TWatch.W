package edu.umich.eecs.twatchw;

import android.content.Context;
import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioTrack;
import android.util.Log;
import android.widget.Toast;

/**
 * Created by Arun on 11/21/2014.
 */
public class Player {
    public static final short [] SHORTCHIRPFORWARD = new short [] {32767, 31443, 27569, 21448, 13565, 4558, -4839, -13853, -21737, -27829, -31612, -32757, -31154, -26923, -20409, -12152, -2846, 6717, 15723, 23391, 29052, 32206, 32565, 30084, 24965, 17645, 8756, -921, -10534, -19224, -26211, -30859, -32738, -31665, -27720, -21250, -12830, -3223, 6696, 16014, 23868, 29520, 32435, 32324, 29185, 23298, 15203, 5656, -4442, -14135, -22492, -28705, -32167, -32529, -29741, -24059, -16022, -6406, 3854, 13751, 22306, 28664, 32183, 32497, 29561, 23653, 15354, 5490, -4944, -14893, -23338, -29409, -32469, -32191, -28587, -22015, -13143, -2888, 7685, 17468, 25427, 30713, 32753, 31315, 26536, 18912, 9247, -1426, -11962, -21219, -28185, -32091, -32495, -29337, -22949, -14019, -3525, 7375, 17471, 25631, 30933, 32767, 30911, 25558, 17300, 7063, -3994, -14611, -23567, -29824, -32647, -31694, -27058, -19264, -9208, 1940, 12878, 22313, 29124, 32491, 31999, 27689, 20061, 10014, -1250, -12381, -22029, -29016, -32480, -31983, -27569, -19762, -9510, 1931, 13149, 22749, 29527, 32625, 31639, 26674, 18340, 7676, -3975, -15138, -24385, -30528, -32764, -30790, -24843, -15675, -4461, 7347, 18214, 26714, 31721, 32563, 29111, 21804, 11595, -169, -11927, -22105, -29333, -32625, -31522, -26153, -17232, -5955, 6149, 17428, 26333, 31629, 32571, 29012, 21426, 10852, -1247, -13189, -23298, -30147, -32756, -30741, -24369, -14527, -2603, 9708, 20645, 28632, 32507, 31695, 26294, 17071, 5351, -7163, -18646, -27409, -32152, -32161, -27414, -18598, -7007, 5643, 17466, 26687, 31912, 32338, 27883, 19200, 7594, -5183, -17185, -26574, -31899, -32326, -27771, -18919, -7124, 5792, 17821, 27084, 32117, 32116, 27062, 17733, 5587, -7458, -19334, -28144, -32468, -31597, -25650, -15568, -2960, 10140, 21613, 29585, 32743, 30554, 23356, 12314, -769, -13741, -24454, -31124, -32625, -28689, -19953, -7864, 5560, 18064, 27534, 32356, 31695, 25644, 15214, 2173, -11255, -22767, -30374, -32747, -29460, -21060, -8990, 4660, 17512, 27313, 32332, 31668, 25419, 14669, 1307, -12302, -23736, -30947, -32630, -28462, -19173, -6419, 7508, 20093, 29045, 32723, 30439, 22589, 10591, -3364, -16717, -27000, -32301, -31620, -25063, -13831, -5, 13837, 25100, 31657, 32256, 26763, 16198, 2547, -11602, -23556, -31022, -32555, -27842, -17766, -4253, 10095, 22505, 30558, 32673, 28417, 18601, 5130, -9363, -22029, -30362, -32701, -28562, -18744, -5185, 9423, 22163, 30474, 32672, 28294, 18203, 4419, -10275, -22897, -30871, -32554, -27581, -16949, -2824, 11896, 24178, 31473, 32252, 26333, 14927, 394, -14236, -25898, -32134, -31612, -24422, -12062, 2866, 17202, 27891, 32644, 30426, 21688, 8286, -6912, -20635, -29915, -32727, -28440, -17965, -3564, 11629, 24293, 31642, 32043, 25386, 13119, -2062, -16802, -27824, -32662, -30218, -21014, -7094, 8433, 22079, 30759, 32497, 26879, 15155, -26, -15216, -26947, -32523, -30646, -21725, -7791, 7952, 21873, 30740, 32476, 26657, 14617, -850, -16134, -27647, -32670, -30001, -20246, -5692, 10225, 23729, 31597, 31936, 24642, 11438, -4523, -19412, -29637, -32715, -27880, -16279, -713, 15041, 27142, 32619, 30111, 20211, 5330, -10877, -24415, -31924, -31526, -23295, -9258, 7100, 21700, 30880, 32319, 25634, 12484, -3828, -19188, -29699, -32678, -27345, -15035, 1126, 17015, 28554, 32767, 28546, 16957, 974, -15275, -27576, -32717, -29339, -18299, -2462, 14033, 26859, 32631, 29806, 19106, 3340, -13325, -26465, -32574, -30000, -19408, -3610, 13169, 26425, 32577, 29946, 19217, 3274, -13571, -26742, -32640, -29635, -18525, -2329, 14519, 27390, 32726, 29032, 17306, 774, -15987, -28317, -32766, -28070, -15519, 1392, 17928, 29434, 32655, 26657, 13113, -4159, -20266, -30621, -32257, -24683, -10041, 7490, 22887, 31712, 31405, 22028, 6271, -11316, -25633, -32506, -29911, -18580, -1804, 15513, 28292, 32760, 27578, 14250, -3303, -19892, -30591, -32201, -24219, -9002, 8919, 24184, 32204, 30549, 19691, 2883, -14810, -28034, -32763, -27540, -13926, 3945, 20627, 31008, 31888, 22972, 6979, -11178, -25898, -32617, -29231, -16765, 926, 18343, 30048, 32365, 24544, 9013, -9364, -24806, -32435, -29816, -17755, -52, 17681, 29801, 32428, 24698, 9058, -9496, -25018, -32503, -29521, -17006, 1017, 18726, 30372, 32154, 23468, 7119, -11568, -26484, -32728, -28226, -14434, 4126, 21339, 31508, 31245, 20614, 3120, -15425, -28840, -32628, -25497, -9811, 9181, 25100, 32572, 29053, 15706, -2971, -20655, -31332, -31349, -20674, -2928, 15833, 29182, 32520, 24676, 8324, -10913, -26392, -32744, -27743, -13100, 6113, 23210, 32216, 29960, 17205, -1596, -19851, -31130, -31438, -20639, -2529, 16490, 29670, 32308, 23439, 6200, -13268, -28000, -32703, -25664, -9386, 10285, 26259, 32751, 27388, 12086, -7617, -24564, -32569, -28689, -14314, 5314, 23007, 32258, 29642, 16096, -3404, -21659, -31904, -30317, -17460, 1905, 20575, 31573, 30768, 18435, -826, -19790, -31318, -31043, -19043, 169, 19331, 31171, 31169, 19301, 63, -19211, -31151, -31163, -19215, 126, 19433, 31261, 31023, 18785, -739, -19991, -31486, -30733, -17997, 1775, 20867, 31799, 30261, 16832, -3231, -22035, -32152, -29563, -15263, 5099, 23451, 32485, 28579, 13263, -7364, -25058, -32716, -27240, -10803, 9996, 26777, 32749, 25470, 7862, -12949, -28510, -32472, -23192, -4433, 16152, 30134, 31759, 20333, 530, -19504, -31500, -30479, -16835, 3800, 22871, 32440, 28499, 12663, -8474, -26080, -32765, -25699, -7823, 13358, 28921, 32279, 21986, 2372, -18260, -31148, -30790, -17310, 3567, 22933, 32495, 28131, 11686, -9794, -27071, -32684, -24184, -5216, 16023, 30325, 31460, 18906, -1894, -21882, -32318, -28615, -12365, 9323, 26926, 32686, 24036, 4766, -16624, -30665, -31113, -17742, 3530, 23243, 32599, 27396, 9931, -11995, -28552, -32289, -21495, -1007, 19948, 31900, 29420, 13600, -8403, -26600, -32698, -23890, -4168, 17471, 31124, 30513, 15888, -6053, -25220, -32767, -25184, -5947, 16055, 30625, 30976, 16919, -5029, -24645, -32759, -25552, -6368, 15814, 30580, 30967, 16763, -5358, -24962, -32767, -25049, -5440, 16764, 31006, 30481, 15411, -7033, -26125, -32709, -23601, -3146, 18835, 31753, 29356, 12771, -10003, -27945, -32336, -21017, 535, 21840, 32500, 27286, 8716, -14135, -30064, -31231, -17031, 5567, 25434, 32745, 23860, 3149, -19136, -31928, -28844, -11389, 11758, 29045, 31813, 18648, -3877, -24470, -32767, -24566, -3971, 18640, 31839, 28923, 11339, -12013, -29270, -31635, -17873, 5021, 25362, 32731, 23328, 1944, -20450, -32333, -27559, -8562, 14871, 30623, 30517, 14578, -8943, -27826, -32224, -19817, 2947, 24183, 32767, 24172, 2880, -19938, -32272, -27599, -8355, 15316, 30895, 30108, 13342, -10522, -28801, -31746, -17755, 5727, 26160, 32592, 21548, -1072, -23130, -32746, -24712, -3334, 19858, 32315, 27265, 7416, -16473, -31413, -29248, -11126, 13082, 30149, 30715, 14438, -9774, -28626, -31731, -17347, 6618, 26939, 32365, 19862, -3666, -25171, -32687, -22004, 954, 23393, 32765, 23801, 1492, -21666, -32662, -25287, -3662, 20040, 32436, 26496, 5549, -18554, -32138, -27461, -7153, 17242, 31812, 28216, 8477, -16126, -31496, -28788, -9528, 15226, 31218, 29202, 10311, -14555, -31003, -29478, -10833, 14120, 30866, 29628, 11097, -13928, -30817, -29661, -11105, 13981, 30860, 29578, 10858, -14279, -30991, -29374, -10354, 14817, 31202, 29041, 9588, -15589, -31476, -28561, -8555, 16585, 31791, 27912, 7249, -17788, -32117, -27070, -5664, 19179, 32418, 26003, 3796, -20730, -32651, -24679, -1645, 22405, 32763, 23062, -784, -24161, -32699, -21119, 3478, 25943, 32395, 18819, -6415, -27685, -31784, -16135, 9559, 29312, 30795, 13052, -12859, -30735, -29360, -9565, 16247, 31855, 27414, 5689, -19636, -32566, -24900, -1459, 22919, 32757, 21778, -3066, -25969, -32316, -18027, 7796, 28641, 31138, 13654, -12610, -30776, -29131, -8702, 17353, 32206, 26228, 3256, -21838, -32764, -22396, 2553, 25851, 32295, 17649, -8544, -29156, -30668, -12056, 14485, 31511, 27795, 5753, -20096, -32679, -23647, 1050, 25063, 32448, 18270, -8071, -29048, -30661, -11802, 14956, 31717, 27233, 4479, -21292, -32761, -22182, 3350, 26634, 31938, 15647, -11243, -30527, -29104, -7910, 18673, 32555, 24251, -606, -25061, -32385, -17536, 9341, 29819};
    public static final short [] SHORTCHIRP = new short [] {29819, 9341, -17536, -32385, -25061, -606, 24251, 32555, 18673, -7910, -29104, -30527, -11243, 15647, 31938, 26634, 3350, -22182, -32761, -21292, 4479, 27233, 31717, 14956, -11802, -30661, -29048, -8071, 18270, 32448, 25063, 1050, -23647, -32679, -20096, 5753, 27795, 31511, 14485, -12056, -30668, -29156, -8544, 17649, 32295, 25851, 2553, -22396, -32764, -21838, 3256, 26228, 32206, 17353, -8702, -29131, -30776, -12610, 13654, 31138, 28641, 7796, -18027, -32316, -25969, -3066, 21778, 32757, 22919, -1459, -24900, -32566, -19636, 5689, 27414, 31855, 16247, -9565, -29360, -30735, -12859, 13052, 30795, 29312, 9559, -16135, -31784, -27685, -6415, 18819, 32395, 25943, 3478, -21119, -32699, -24161, -784, 23062, 32763, 22405, -1645, -24679, -32651, -20730, 3796, 26003, 32418, 19179, -5664, -27070, -32117, -17788, 7249, 27912, 31791, 16585, -8555, -28561, -31476, -15589, 9588, 29041, 31202, 14817, -10354, -29374, -30991, -14279, 10858, 29578, 30860, 13981, -11105, -29661, -30817, -13928, 11097, 29628, 30866, 14120, -10833, -29478, -31003, -14555, 10311, 29202, 31218, 15226, -9528, -28788, -31496, -16126, 8477, 28216, 31812, 17242, -7153, -27461, -32138, -18554, 5549, 26496, 32436, 20040, -3662, -25287, -32662, -21666, 1492, 23801, 32765, 23393, 954, -22004, -32687, -25171, -3666, 19862, 32365, 26939, 6618, -17347, -31731, -28626, -9774, 14438, 30715, 30149, 13082, -11126, -29248, -31413, -16473, 7416, 27265, 32315, 19858, -3334, -24712, -32746, -23130, -1072, 21548, 32592, 26160, 5727, -17755, -31746, -28801, -10522, 13342, 30108, 30895, 15316, -8355, -27599, -32272, -19938, 2880, 24172, 32767, 24183, 2947, -19817, -32224, -27826, -8943, 14578, 30517, 30623, 14871, -8562, -27559, -32333, -20450, 1944, 23328, 32731, 25362, 5021, -17873, -31635, -29270, -12013, 11339, 28923, 31839, 18640, -3971, -24566, -32767, -24470, -3877, 18648, 31813, 29045, 11758, -11389, -28844, -31928, -19136, 3149, 23860, 32745, 25434, 5567, -17031, -31231, -30064, -14135, 8716, 27286, 32500, 21840, 535, -21017, -32336, -27945, -10003, 12771, 29356, 31753, 18835, -3146, -23601, -32709, -26125, -7033, 15411, 30481, 31006, 16764, -5440, -25049, -32767, -24962, -5358, 16763, 30967, 30580, 15814, -6368, -25552, -32759, -24645, -5029, 16919, 30976, 30625, 16055, -5947, -25184, -32767, -25220, -6053, 15888, 30513, 31124, 17471, -4168, -23890, -32698, -26600, -8403, 13600, 29420, 31900, 19948, -1007, -21495, -32289, -28552, -11995, 9931, 27396, 32599, 23243, 3530, -17742, -31113, -30665, -16624, 4766, 24036, 32686, 26926, 9323, -12365, -28615, -32318, -21882, -1894, 18906, 31460, 30325, 16023, -5216, -24184, -32684, -27071, -9794, 11686, 28131, 32495, 22933, 3567, -17310, -30790, -31148, -18260, 2372, 21986, 32279, 28921, 13358, -7823, -25699, -32765, -26080, -8474, 12663, 28499, 32440, 22871, 3800, -16835, -30479, -31500, -19504, 530, 20333, 31759, 30134, 16152, -4433, -23192, -32472, -28510, -12949, 7862, 25470, 32749, 26777, 9996, -10803, -27240, -32716, -25058, -7364, 13263, 28579, 32485, 23451, 5099, -15263, -29563, -32152, -22035, -3231, 16832, 30261, 31799, 20867, 1775, -17997, -30733, -31486, -19991, -739, 18785, 31023, 31261, 19433, 126, -19215, -31163, -31151, -19211, 63, 19301, 31169, 31171, 19331, 169, -19043, -31043, -31318, -19790, -826, 18435, 30768, 31573, 20575, 1905, -17460, -30317, -31904, -21659, -3404, 16096, 29642, 32258, 23007, 5314, -14314, -28689, -32569, -24564, -7617, 12086, 27388, 32751, 26259, 10285, -9386, -25664, -32703, -28000, -13268, 6200, 23439, 32308, 29670, 16490, -2529, -20639, -31438, -31130, -19851, -1596, 17205, 29960, 32216, 23210, 6113, -13100, -27743, -32744, -26392, -10913, 8324, 24676, 32520, 29182, 15833, -2928, -20674, -31349, -31332, -20655, -2971, 15706, 29053, 32572, 25100, 9181, -9811, -25497, -32628, -28840, -15425, 3120, 20614, 31245, 31508, 21339, 4126, -14434, -28226, -32728, -26484, -11568, 7119, 23468, 32154, 30372, 18726, 1017, -17006, -29521, -32503, -25018, -9496, 9058, 24698, 32428, 29801, 17681, -52, -17755, -29816, -32435, -24806, -9364, 9013, 24544, 32365, 30048, 18343, 926, -16765, -29231, -32617, -25898, -11178, 6979, 22972, 31888, 31008, 20627, 3945, -13926, -27540, -32763, -28034, -14810, 2883, 19691, 30549, 32204, 24184, 8919, -9002, -24219, -32201, -30591, -19892, -3303, 14250, 27578, 32760, 28292, 15513, -1804, -18580, -29911, -32506, -25633, -11316, 6271, 22028, 31405, 31712, 22887, 7490, -10041, -24683, -32257, -30621, -20266, -4159, 13113, 26657, 32655, 29434, 17928, 1392, -15519, -28070, -32766, -28317, -15987, 774, 17306, 29032, 32726, 27390, 14519, -2329, -18525, -29635, -32640, -26742, -13571, 3274, 19217, 29946, 32577, 26425, 13169, -3610, -19408, -30000, -32574, -26465, -13325, 3340, 19106, 29806, 32631, 26859, 14033, -2462, -18299, -29339, -32717, -27576, -15275, 974, 16957, 28546, 32767, 28554, 17015, 1126, -15035, -27345, -32678, -29699, -19188, -3828, 12484, 25634, 32319, 30880, 21700, 7100, -9258, -23295, -31526, -31924, -24415, -10877, 5330, 20211, 30111, 32619, 27142, 15041, -713, -16279, -27880, -32715, -29637, -19412, -4523, 11438, 24642, 31936, 31597, 23729, 10225, -5692, -20246, -30001, -32670, -27647, -16134, -850, 14617, 26657, 32476, 30740, 21873, 7952, -7791, -21725, -30646, -32523, -26947, -15216, -26, 15155, 26879, 32497, 30759, 22079, 8433, -7094, -21014, -30218, -32662, -27824, -16802, -2062, 13119, 25386, 32043, 31642, 24293, 11629, -3564, -17965, -28440, -32727, -29915, -20635, -6912, 8286, 21688, 30426, 32644, 27891, 17202, 2866, -12062, -24422, -31612, -32134, -25898, -14236, 394, 14927, 26333, 32252, 31473, 24178, 11896, -2824, -16949, -27581, -32554, -30871, -22897, -10275, 4419, 18203, 28294, 32672, 30474, 22163, 9423, -5185, -18744, -28562, -32701, -30362, -22029, -9363, 5130, 18601, 28417, 32673, 30558, 22505, 10095, -4253, -17766, -27842, -32555, -31022, -23556, -11602, 2547, 16198, 26763, 32256, 31657, 25100, 13837, -5, -13831, -25063, -31620, -32301, -27000, -16717, -3364, 10591, 22589, 30439, 32723, 29045, 20093, 7508, -6419, -19173, -28462, -32630, -30947, -23736, -12302, 1307, 14669, 25419, 31668, 32332, 27313, 17512, 4660, -8990, -21060, -29460, -32747, -30374, -22767, -11255, 2173, 15214, 25644, 31695, 32356, 27534, 18064, 5560, -7864, -19953, -28689, -32625, -31124, -24454, -13741, -769, 12314, 23356, 30554, 32743, 29585, 21613, 10140, -2960, -15568, -25650, -31597, -32468, -28144, -19334, -7458, 5587, 17733, 27062, 32116, 32117, 27084, 17821, 5792, -7124, -18919, -27771, -32326, -31899, -26574, -17185, -5183, 7594, 19200, 27883, 32338, 31912, 26687, 17466, 5643, -7007, -18598, -27414, -32161, -32152, -27409, -18646, -7163, 5351, 17071, 26294, 31695, 32507, 28632, 20645, 9708, -2603, -14527, -24369, -30741, -32756, -30147, -23298, -13189, -1247, 10852, 21426, 29012, 32571, 31629, 26333, 17428, 6149, -5955, -17232, -26153, -31522, -32625, -29333, -22105, -11927, -169, 11595, 21804, 29111, 32563, 31721, 26714, 18214, 7347, -4461, -15675, -24843, -30790, -32764, -30528, -24385, -15138, -3975, 7676, 18340, 26674, 31639, 32625, 29527, 22749, 13149, 1931, -9510, -19762, -27569, -31983, -32480, -29016, -22029, -12381, -1250, 10014, 20061, 27689, 31999, 32491, 29124, 22313, 12878, 1940, -9208, -19264, -27058, -31694, -32647, -29824, -23567, -14611, -3994, 7063, 17300, 25558, 30911, 32767, 30933, 25631, 17471, 7375, -3525, -14019, -22949, -29337, -32495, -32091, -28185, -21219, -11962, -1426, 9247, 18912, 26536, 31315, 32753, 30713, 25427, 17468, 7685, -2888, -13143, -22015, -28587, -32191, -32469, -29409, -23338, -14893, -4944, 5490, 15354, 23653, 29561, 32497, 32183, 28664, 22306, 13751, 3854, -6406, -16022, -24059, -29741, -32529, -32167, -28705, -22492, -14135, -4442, 5656, 15203, 23298, 29185, 32324, 32435, 29520, 23868, 16014, 6696, -3223, -12830, -21250, -27720, -31665, -32738, -30859, -26211, -19224, -10534, -921, 8756, 17645, 24965, 30084, 32565, 32206, 29052, 23391, 15723, 6717, -2846, -12152, -20409, -26923, -31154, -32757, -31612, -27829, -21737, -13853, -4839, 4558, 13565, 21448, 27569, 31443, 32767};

    public static final short [] CHIRPHANN = new short [] {0, 0, 0, -2, -3, 0, 7, 13, 9, -5, -23, -30, -13, 21, 51, 48, 6, -52, -86, -62, 14, 97, 125, 64, -55, -156, -159, -47, 116, 222, 183, 8, -197, -289, -188, 57, 292, 350, 170, -149, -398, -398, -122, 264, 507, 424, 43, -401, -612, -425, 65, 552, 705, 394, -205, -713, -780, -331, 371, 876, 833, 234, -559, -1035, -858, -104, 765, 1185, 854, -55, -982, -1321, -819, 243, 1206, 1440, 753, -455, -1433, -1538, -659, 686, 1659, 1617, 539, -932, -1880, -1675, -396, 1190, 2094, 1714, 234, -1455, -2301, -1736, -57, 1726, 2501, 1744, -130, -1998, -2694, -1743, 325, 2270, 2882, 1736, -522, -2541, -3068, -1729, 717, 2809, 3254, 1726, -905, -3073, -3443, -1733, 1083, 3334, 3639, 1755, -1245, -3589, -3845, -1798, 1388, 3838, 4064, 1868, -1505, -4080, -4299, -1971, 1592, 4311, 4554, 2112, -1642, -4530, -4828, -2297, 1648, 4731, 5123, 2531, -1604, -4909, -5438, -2819, 1500, 5056, 5770, 3165, -1329, -5164, -6116, -3572, 1080, 5221, 6466, 4041, -746, -5215, -6812, -4569, 318, 5131, 7140, 5153, 212, -4952, -7434, -5785, -851, 4661, 7673, 6452, 1601, -4240, -7834, -7138, -2461, 3672, 7888, 7818, 3425, -2941, -7805, -8462, -4479, 2035, 7553, 9035, 5603, -949, -7101, -9494, -6766, -316, 6416, 9789, 7926, 1750, -5473, -9869, -9030, -3327, 4254, 9680, 10016, 5006, -2753, -9170, -10810, -6732, 980, 8292, 11330, 8428, 1035, -7014, -11495, -10002, -3239, 5320, 11221, 11345, 5550, -3219, -10439, -12337, -7859, 752, 9096, 12854, 10030, 2000, -7168, -12777, -11904, -4919, 4675, 12007, 13308, 7844, -1682, -10476, -14066, -10573, -1686, 8164, 14018, 12880, 5247, -5115, -13038, -14523, -8759, 1450, 11057, 15268, 11931, 2627, -8087, -14919, -14447, -6833, 4238, 13347, 15990, 10808, 266, -10521, -16280, -14148, -5093, 6539, 15116, 16440, 9806, -1647, -12422, -17310, -13900, -3762, 8287, 16479, 16851, 9159, -2988, -13828, -18181, -13922, -3003, 9444, 17535, 17402, 9044, -3660, -14758, -19013, -14374, -2947, 9963, 18329, 18206, 9590, -3569, -15184, -19848, -15347, -3700, 9757, 18824, 19288, 10875, -2606, -15004, -20626, -16853, -5347, 8691, 18882, 20562, 12913, -654, -14032, -21166, -18794, -7928, 6591, 18256, 21812, 15614, 2381, -12014, -21152, -20929, -11390, 3278, 16596, 22656, 18735, 6511, -8669, -20136, -22826, -15512, -1348, 13501, 22547, 21812, 11566, -3779, -17581, -23845, -19819, -7195, 8615, 20809, 24118, 17079, 2665, -12977, -23161, -23507, -13826, 1802, 16755, 24678, 22181, 10277, -6038, -19896, -25445, -20316, -6622, 9925, 22403, 25578, 18087, 3014, -13392, -24316, -25203, -15650, 426, 16408, 25701, 24453, 13144, -3617, -18976, -26641, -23454, -10681, 6502, 21120, 27226, 22319, 8353, -9051, -22879, -27548, -21152, -6232, 11251, 24302, 27691, 20038, 4368, -13104, -25440, -27732, -19050, -2800, 14617, 26340, 27739, 18244, 1555, -15802, -27044, -27766, -17666, -654, 16670, 27587, 27855, 17351, 112, -17225, -27990, -28034, -17322, 57, 17470, 28265, 28318, 17595, 154, -17395, -28408, -28710, -18175, -760, 16988, 28402, 29194, 19056, 1767, -16224, -28216, -29740, -20223, -3183, 15074, 27804, 30303, 21645, 5006, -13506, -27108, -30818, -23276, -7228, 11483, 26058, 31203, 25051, 9825, -8977, -24577, -31357, -26881, -12752, 5966, 22582, 31164, 28652, 15943, -2448, -19998, -30493, -30227, -19295, -1553, 16758, 29209, 31440, 22673, 5977, -12820, -27177, -32104, -25898, -10718, 8182, 24275, 32019, 28754, 15614, -2889, -20418, -30983, -30988, -20443, -2942, 15565, 28811, 32322, 24923, 9122, -9753, -25360, -32471, -28716, -15367, 3110, 20556, 31173, 31448, 21308, 4121, -14425, -28219, -32731, -26496, -11577, 7127, 23501, 32209, 30431, 18767, 1019, -17051, -29606, -32603, -25099, -9529, 9090, 24788, 32550, 29915, 17750, -52, -17826, -29937, -32566, -24907, -9401, 9049, 24640, 32489, 30161, 18410, 929, -16821, -29325, -32717, -25973, -11208, 6996, 23023, 31950, 31060, 20656, 3949, -13937, -27552, -32767, -28026, -14800, 2880, 19663, 30491, 32129, 24116, 8890, -8968, -24116, -32046, -30427, -19775, -3281, 14149, 27365, 32487, 28039, 15364, -1786, -18376, -29562, -32103, -25297, -11159, 6179, 21689, 30896, 31172, 22478, 7350, -9845, -24178, -31569, -29940, -19796, -4059, 12784, 25964, 31773, 28610, 17408, 1351, -15036, -27168, -31677, -27345, -15421, 745, 16654, 27906, 31418, 26263, 13904, -2228, -17695, -28271, -31097, -25443, -12894, 3106, 18209, 28335, 30782, 24933, 12408, -3396, -18231, -28139, -30507, -24748, -12440, 3114, 17782, 27696, 30271, 24876, 12975, -2273, -16863, -26990, -30046, -25280, -13979, 889, 15462, 25982, 29768, 25893, 15400, 1017, -13557, -24609, -29351, -26623, -17167, -3418, 11124, 22795, 28680, 27346, 19177, 6261, -8147, -20455, -27622, -27910, -21298, -9467, 4629, 17513, 26032, 28135, 23356, 12913, -610, -13910, -23765, -27820, -25141, -16427, -3818, 9631, 20697, 26756, 26405, 19779, 8500, -4720, -16744, -24746, -26876, -22682, -13201, -694, 11894, 21632, 26281, 24806, 17601, 6381, -6234, -17332, -24378, -25796, -21310, -11998, -20, 11878, 21002, 25315, 23888, 17093, 6508, -5458, -16117, -23102, -24890, -21135, -12721, -1556, 9868, 19032, 23943, 23564, 18030, 8602, -2627, -13197, -20821, -23876, -21748, -14949, -4989, 5960, 15544, 21727, 23227, 19772, 12149, 2017, -8456, -17057, -21996, -22273, -17882, -9792, 270, 10187, 17902, 21840, 21227, 16242, 7959, -1882, -11249, -18229, -21428, -20236, -14947, -6679, 2860, 11733, 18160, 20880, 19391, 14041, 5944, -3256, -11720, -17779, -20265, -18731, -13528, -5724, 3122, 11267, 17134, 19608, 18253, 13379, 5973, -2505, -10412, -16238, -18895, -17918, -13539, -6635, 1449, 9172, 15078, 18081, 17656, 13928, 7638, -2, -7556, -13621, -17094, -17370, -14442, -8894, -1780, 5574, 11825, 15847, 16943, 14955, 10288, 3823, -3250, -9653, -14248, -16240, -15314, -11678, -6017, 635, 7091, 12215, 15128, 15352, 12891, 8215, 2172, -4166, -9699, -13484, -14895, -13729, -10226, -5023, 963, 6704, 11226, 13786, 13981, 11820, 7703, 2355, -3309, -8340, -11910, -13452, -12746, -9946, -5550, -308, 4904, 9237, 11999, 12767, 11453, 8306, 3869, -1121, -5853, -9574, -11706, -11939, -10271, -7003, -2681, 1993, 6277, 9505, 11193, 11106, 9292, 6066, 1955, -2386, -6286, -9152, -10567, -10341, -8544, -5479, -1638, 2381, 5969, 8595, 9883, 9669, 8015, 5200, 1665, -2049, -5392, -7877, -9157, -9072, -7663, -5165, -1966, 1455, 4599, 7017, 8378, 8511, 7424, 5302, 2468, -655, -3622, -6016, -7514, -7926, -7221, -5524, -3095, -289, 2494, 4873, 6529, 7252, 6967, 5738, 3757, 1311, -1255, -3593, -5394, -6428, -6578, -5847, -4356, -2323, -32, 2206, 4100, 5409, 5979, 5754, 4787, 3224, 1284, -770, -2673, -4183, -5118, -5377, -4946, -3899, -2389, -619, 1179, 2780, 3989, 4668, 4747, 4237, 3219, 1834, 265, -1289, -2641, -3631, -4150, -4153, -3654, -2733, -1512, -150, 1186, 2339, 3178, 3615, 3612, 3186, 2401, 1363, 202, -942, -1938, -2676, -3081, -3119, -2799, -2173, -1323, -355, 616, 1482, 2149, 2551, 2652, 2456, 1996, 1333, 551, -258, -1007, -1615, -2022, -2193, -2120, -1822, -1342, -740, -86, 547, 1093, 1498, 1727, 1764, 1615, 1305, 874, 375, -137, -609, -995, -1258, -1379, -1354, -1193, -920, -571, -184, 198, 539, 806, 977, 1041, 999, 861, 648, 386, 104, -168, -406, -589, -702, -739, -704, -604, -455, -275, -83, 101, 261, 382, 458, 485, 464, 403, 310, 197, 78, -35, -135, -211, -260, -280, -272, -241, -192, -131, -67, -5, 48, 89, 117, 129, 128, 115, 94, 68, 41, 15, -5, -22, -32, -37, -36, -32, -25, -18, -11, -5, -1, 0, 1, 1, 0, 0, 0};
    public static final short [] HIGHCHIRP = new short [] {7065, -19892, 29021, -32731, 30307, -22184, 9873, 4315, -17703, 27747, -32527, 31112, -23753, 11838, 2362, -16123, 26791, -32293, 31547, -24676, 12996, 1230, -15232, 26265, -32152, 31719, -25029, 13383, 926, -15067, 26225, -32162, 31676, -24841, 13010, 1452, -15637, 26675, -32319, 31405, -24097, 11865, 2805, -16916, 27568, -32557, 30834, -22735, 9916, 4975, -18847, 28801, -32746, 29834, -20654, 7119, 7931, -21321, 30208, -32692, 28224, -17733, 3442, 11599, -24168, 31551, -32142, 25791, -13849, -1107, 15840, -27135, 32518, -30790, 22309, -8916, -6452, 20414, -29874, 32722, -28305, 17583, -2928, -12396, 24958, -31931, 31726, -24369, 11499, 3986, -18583, 28970, -32766, 29085, -18746, 4099, 11504, -24474, 31811, -31799, 24420, -11365, -4347, 19061, -29337, 32754, -28491, 17527, -2422, -13268, 25835, -32291, 31084, -22477, 8502, 7518, -21754, 30783, -32419, 26245, -13729, -2120, 17471, -28592, 32764, -28949, 18054, -2728, -13281, 26041, -32396, 30760, -21512, 6923, 9398, -23396, 31573, -31868, 24185, -10426, -5965, 20870, -30521, 32463, -26181, 13246, 3071, -18620, 29428, -32715, 27616, -15417, -761, 16759, -28440, 32766, -28595, 16986, -941, -15363, 27665, -32729, 29206, -17997, 2034, 14479, -27177, 32682, -29511, 18483, -2517, -14135, 27019, -32669, 29545, -18464, 2392, 14339, -27204, 32699, -29311, 17937, -1658, -15087, 27715, -32749, 28783, -16884, 314, 16356, -28510, 32761, -27905, 15269, 1639, -18105, 29511, -32643, 26596, -13049, -4193, 20264, -30607, 32269, -24754, 10178, 7316, -22733, 31648, -31485, 22265, -6620, -10948, 25365, -32444, 30111, -19017, 2372, 14978, -27964, 32767, -27955, 14918, 2524, -19237, 30275, -32354, 24832, -9920, -7958, 23477, -31991, 30930, -20587, 4048, 13723, -27370, 32756, -28229, 15135, 2567, -19504, 30507, -32198, 24036, -8497, -9663, 24866, -32416, 29961, -18235, 848, 16816, -29265, 32605, -25771, 10872, 7443, -23438, 32078, -30624, 19506, -2215, -15790, 28803, -32675, 26151, -11284, -7198, 23393, -32103, 30513, -19107, 1536, 16544, -29290, 32560, -25268, 9758, 8940, -24739, 32467, -29576, 16986, 1191, -18992, 30547, -32028, 22918, -6210, -12572, 27190, -32766, 27417, -12904, -5938, 22805, -32027, 30481, -18664, 536, 17785, -30098, 32208, -23375, 6576, 12477, -27283, 32766, -27022, 11997, 7164, -23874, 32358, -29664, 16698, 2068, -20131, 31202, -31406, 20646, -2657, -16276, 29512, -32386, 23860, -6914, -12487, 27484, -32753, 26398, -10652, -8899, 25291, -32657, 28339, -13858, -5610, 23075, -32239, 29775, -16546, -2683, 20954, -31626, 30799, -18746, -158, 19019, -30928, 31500, -20499, 1944, 17339, -30236, 31959, -21846, 3619, 15965, -29621, 32244, -22827, 4866, 14930, -29140, 32407, -23478, 5689, 14259, -28830, 32488, -23820, 6094, 13965, -28714, 32508, -23870, 6081, 14053, -28801, 32473, -23628, 5652, 14522, -29085, 32374, -23084, 4803, 15362, -29545, 32183, -22218, 3531, 16556, -30143, 31859, -21000, 1830, 18077, -30829, 31344, -19390, -298, 19881, -31532, 30567, -17347, -2848, 21911, -32162, 29445, -14829, -5797, 24089, -32614, 27887, -11802, -9107, 26311, -32764, 25799, -8244, -12709, 28447, -32471, 23092, -4160, -16507, 30343, -31586, 19691, 414, -20360, 31812, -29959, 15548, 5398, -24090, 32651, -27451, 10654, 10658, -27472, 32642, -23949, 5060, 15997, -30241, 31571, -19387, -1114, 21151, -32108, 29246, -13771, -7661, 25794, -32766, 25529, -7196, -14279, 29546, -31931, 20362, 125, -20571, 32001, -29370, 13808, 7852, -26059, 32755, -24950, 6075, 15510, -30210, 31463, -18682, -2453, 22505, -32486, 27897, -10770, -11214, 28158, -32406, 22009, -1645, -19478, 31773, -29632, 14001, 8023, -26398, 32715, -24057, 4362, 17347, -31094, 30530, -15886, -6102, 25283, -32766, 25056, -5704, -16313, 30746, -30845, 16536, 5516, -24999, 32766, -25145, 5689, 16458, -30855, 30683, -15995, -6280, 25590, -32752, 24336, -4320, -17770, 31382, -29988, 14224, 8374, -26962, 32589, -22516, 1573, 20142, -32125, 28550, -11120, -11723, 28876, -31970, 19468, 2553, -23338, 32702, -26027, 6561, 16143, -30909, 30435, -14925, -7977, 26941, -32553, 21997, -494, -21268, 32435, -27408, 8670, 14420, -30293, 30961, -16060, -6936, 26449, -32618, 22297, -681, -21292, 32469, -27146, 8000, 15235, -30707, 30492, -14670, -8679, 27588, -32330, 20438, 1992, -23407, 32741, -25140, 4511, 18469, -31870, 28700, -10581, -13067, 29904, -31113, 16031, 7464, -27055, 32433, -20740, -1891, 23538, -32756, 24644, -3468, -19559, 32208, -27728, 8474, 15311, -30931, 30017, -13027, -10958, 29073, -31566, 17067, 6640, -26776, 32452, -20568, -2468, 24178, -32763, 23529, -1473, -21398, 32596, -25975, 5127, 18543, -32046, 27941, -8454, -15702, 31207, -29476, 11437, 12948, -30164, 30636, -14071, -10338, 28997, -31477, 16363, 7916, -27773, 32056, -18330, -5715, 26554, -32427, 19990, 3756, -25389, 32640, -21368, -2054, 24320, -32741, 22487, 617, -23381, 32767, -23369, 549, 22597, -32750, 24034, -1445, -21990, 32717, -24500, 2069, 21574, -32687, 24778, -2422, -21358, 32671, -24876, 2505, 21346, -32675, 24798, -2318, -21539, 32698, -24540, 1860, 21933, -32731, 24097, -1131, -22519, 32760, -23455, 130, 23284, -32763, 22598, 1141, -24206, 32713, -21507, -2681, 25262, -32574, 20160, 4484, -26419, 32305, -18533, -6538, 27634, -31860, 16602, 8828, -28860, 31186, -14347, -11327, 30037, -30229, 11753, 13999, -31097, 28930, -8810, -16794, 31964, -27234, 5520, 19650, -32551, 25088, -1903, -22487, 32767, -22447, -2008, 25210, -32514, 19278, 6158, -27707, 31698, -15568, -10464, 29851, -30229, 11324, 14820, -31502, 28027, -6587, -19088, 32515, -25035, 1431, 23106, -32742, 21224, 4030, -26686, 32047, -16604, -9639, 29622, -30314, 11232, 15194, -31698, 27461, -5225, -20450, 32703, -23455, -1241, 25130, -32446, 18327, 7922, -28936, 30775, -12186, -14510, 31564, -27601, 5229, 20644, -32731, 22919, 2251, -25923, 32199, -16830, -9873, 29936, -29813, 9555, 17173, -32288, 25529, -1445, -23631, 32649, -19443, -7020, 28706, -30790, 11818, 15255, -31883, 26639, -3090, -22594, 32732, -20309, -6134, 28352, -30968, 12139, 15114, -31889, 26514, -2691, -23015, 32688, -19548, -7256, 28997, -30439, 10540, 16765, -32302, 25122, -245, -24815, 32370, -17055, -10332, 30414, -28941, 6924, 20021, -32737, 22143, 4242, -27611, 31261, -12550, -15156, 32009, -25896, 1174, 24403, -32419, 17067, 10607, -30631, 28508, -5742, -21195, 32764, -20536, -6632, 28983, -30219, 9406, 18286, -32619, 23079, 3378, -27368, 31268, -12179, -15882, 32252, -24838, -920, 26010, -31861, 14109, 14113, -31870, 25945, -713, -25061, 32158, -15252, -13058, 31612, -26499, 1516, 24614, -32262, 15647, 12755, -31555, 26553, -1490, -24709, 32215, -15311, -13214, 31717, -26114, 635, 25338, -31997, 14230, 14420, -32049, 25138, 1050, -26443, 31528, -12364, -16327, 32445, -23534, -3559, 27911, -30668, 9661, 18848, -32733, 21178, 6860, -29567, 29226, -6070, -21838, 32674, -17929, -10877, 31159, -26972, 1573, 25073, -31973, 13654, 15454, -32358, 23663, 3778, -28235, 30289, -8276, -20328, 32757, -19081, -9824, 30895, -27271, 1819, 25100, -31899, 13090, 16247, -32524, 22614, 5530, -29223, 29317, -5704, -22536, 32525, -16135, -13362, 32010, -24620, -2825, 27978, -30305, 7874, 21004, -32699, 17602, 11940, -31689, 25397, 1794, -27518, 30563, -8383, -20730, 32710, -17616, -12081, 31769, -25084, -2453, 27960, -30188, 7249, 21748, -32588, 16180, 13777, -32202, 23624, 4792, -29191, 29041, -4434, -23919, 32100, -13170, -16902, 32680, -20777, -8749, 30860, -26756, -107, 26889, -30763, 8394, 21151, -32627, 16190, 14120, -32335, 22807, 6317, -30020, 27891, -1730, -25931, 31217, -9528, -20410, 32687, -16638, -13850, 32323, -22704, -6672, 30248, -27461, 708, 26672, -30741, 7905, 21864, -32471, 14578, 16130, -32662, 20445, 9793, -31403, 25294, 3172, -28842, 28981, -3431, -25171, 31429, -9751, -20611, 32626, -15558, -15400, 32612, -20672, -9774, 31474, -24959, -3960, 29332, -28334, 1830, 26331, -30755, 7416, 22631, -32220, 12642, 18398, -32761, 17383, 13797, -32438, 21548, 8983, -31331, 25076, 4100, -29535, 27932, -725, -27155, 30108, -5385, -24300, 31616, -9790, -21076, 32488, -13870, -17588, 32767};
    public static final short [] WHITENOISE = new short [] {-1676, 21375, -12901, 21144, 4315, -29280, -15768, 5854, -1331, -19800, -17148, 18410, 7708, -23383, 14201, -6471, -2471, 13619, -6491, -31908, -27949, 5983, -3548, 28032, -26618, -8185, 3022, -25515, 26576, 8757, 26638, 8578, -31918, -12058, -25503, 8506, -28864, 11432, -1482, -12777, 1073, 13603, 20606, -12102, -12398, -10186, 10927, 23724, 17200, 24695, 24392, -21500, 23012, 30198, 17754, 24641, -28424, 9645, -11558, 9221, 24952, -8302, 17526, -21809, 1296, 8374, 14055, -12721, -15527, 27334, 7558, -26731, 8390, -20235, 18198, 23950, -10935, -23955, 17443, -11918, -16270, -19707, -28319, 3410, -6320, 16434, -842, -7570, -28818, -18812, 2882, -5871, 26346, -29155, -3711, 2484, -24044, 2690, 23481, -19842, -22628, -28820, 10583, -31631, -13725, 31133, 17388, -16841, 11966, -23795, 8529, 23458, 26269, -9963, -899, 11795, 13412, -2570, -8918, -14438, -27846, -3638, -21965, -6652, 27635, 744, 27212, -26812, 32396, -26517, -12277, 18751, 6728, -2240, -13264, -24103, -13469, -21905, -12017, -25636, 21820, 30987, -18511, 13540, -30290, 7641, 11128, -30409, -32634, -23492, 23812, -14716, 2082, 1460, 4443, -10970, -5689, -5627, 31797, -29059, -6797, 19141, 6188, -12513, 26401, -26734, -11891, 25426, 10344, 12124, -1711, -23572, 29629, 25141, -4110, 22009, -11489, -8697, 19373, -26328, 29685, -32756, -13444, -29669, -3762, 19044, 27171, 2185, 19979, 4117, 16484, -32247, -1525, -16405, -12621, 30682, -19133, 1345, -18033, 4415, 32733, -24189, 29875, -24713, -20616, 9626, -24432, -27510, 10462, -31053, 31879, 2584, -8289, 13584, 29398, -7735, 12675, 6706, 18086, 6034, -8135, 23040, -18021, 19512, 32648, -14369, 13823, 10818, -5595, -113, 29510, 29777, 15304, -7577, -30219, 5449, 4252, -9515, 24981, 8182, 8148, -13421, -27946, -13555, -17429, -10125, 22898, -22316, -22480, 568, 6787, -22248, 8900, 22599, 18547, -15469, -12175, -20816, -3451, -11388, -14467, 28370, -6591, -7922, 6100, -28352, -19367, 14693, 4937, -19696, 22569, -5011, 2940, 1837, -20690, -27486, -2359, -30846, -4271, 3802, 9118, -30605, 13791, -21727, 6135, 7100, 17896, -29156, 23308, -7603, -6595, -11471, 3639, -13442, -8796, -9918, 8556, 10804, 32334, 29197, -9833, -20172, 27569, -13884, 3341, 27552, -26936, -15921, -4793, 5107, 26251, -18514, 30687, -4338, 18714, 1658, -11086, -4494, 14317, 27348, 25627, -24002, -24974, 25852, 10058, -30207, 309, 25918, -7508, -13663, -17475, -19649, -7864, 6228, -15218, 8045, 20012, -26022, 15062, 9763, -1665, 28445, -26516, 6511, -17506, -30729, 5247, 22485, 3738, 22332, -19386, 7967, -21419, -13828, -31637, 13239, 29705, 16361, 16868, 2765, -14319, -16763, -14040, 30431, -17695, 2452, -19383, -4334, -23509, -8174, 19289, 20554, 26532, 2652, 20886, 13694, -30014, -23264, -17521, -16643, -21664, -17408, -14753, 29673, -10074, -13317, -6279, -12994, 16907, -9215, -24646, 7699, -9493, -9005, -28353, 24125, -2766, -27753, 26606, -14344, 7482, 10635, -19710, 30224, 10848, 2713, 24244, 3748, -31447, -1138, 20236, 15507, 4750, -32263, 14342, -3323, 10487, 16637, 20023, -30938, 18385, 4425, -27852, -16320, -24084, 4236, 2692, -28325, 32093, -16354, -12124, -13098, -30091, 1833, -16031, -5998, 29405, 27549, -24887, 6041, -9222, 14409, 1547, -15714, -454, 23381, 14745, -19770, -22518, -8510, 23803, 12140, 8817, -23567, -27643, 24715, -5228, -810, -2606, 1030, -14981, -17637, 26252, 26854, 6810, -8855, 6478, 11070, 25925, -27115, 2563, -4701, 7697, 3868, -18013, -25985, -32197, -28966, -11653, 18363, -10810, 7856, 32386, 9725, 2613, -17592, 15758, 25559, 23642, 6377, 10168, 27269, -4390, -13814, 8665, -13442, 8018, -29730, 32499, -19267, 7054, -10011, 14306, -31014, -28461, 28061, -27086, -11012, 1720, -16647, 2818, 18455, 1437, 28382, -23187, -5469, -14436, 6445, -30457, -28669, -11637, -26389, -21680, -8465, -30241, 13748, 9287, -21416, -28770, -6133, -2427, -19536, 24282, 6435, -31341, 26245, -3091, -29041, -25871, 32750, 24070, 7569, -31083, -11661, -2380, -26347, 4664, -11441, -3253, 5114, -27935, -29085, -13078, 1427, 4065, -16981, 27118, 21403, -3643, 31675, 5142, -17450, 20408, -3201, -16428, 29925, -23480, 825, 31008, 9745, 7534, -1994, 5110, 27026, -8133, -17822, -5024, -14876, -3642, 8378, 2276, -7527, 24538, -13118, -6568, 1164, -28791, -17651, -25068, -26363, 25643, -30659, 22277, 477, -25381, -627, 6533, -26925, 31422, 10054, -2553, 23901, -15583, 21286, -11237, 28996, -16813, 30035, 711, 4243, 32440, 17805, -12234, -29050, -29957, 20562, -5777, -7611, 1519, 25767, -6181, 6859, -26624, -10777, -23336, -16763, -7952, -15091, -18687, 8787, 19693, -19152, 26036, 16144, 2390, 30880, 4263, -18549, 23507, 23786, -12267, -11368, 22341, -490, -29443, 18267, -4818, -14458, -10939, -8743, 19369, -30311, 14893, 24488, -14073, 10306, -17617, 8013, -27917, 30669, 7225, -7640, -30845, 23494, 6803, 22855, 303, -32333, 27536, -5867, 15268, -22925, 20713, 26914, 18262, 16895, -6229, 13266, 4301, 5567, -10190, 13419, -22283, -32754, 4073, 3054, 3339, 12782, 28089, 29187, 26497, 6840, 28005, -25169, -10460, -30440, 2521, 15587, -20945, -4846, -26403, -12929, 18406, 2428, 17679, 9129, 25832, -28865, -21304, -5497, 15755, 25820, -31154, -23814, -4988, 17383, 1605, 16721, -21696, 11349, 7796, -32403, 15784, 32310, -24431, -9160, -20298, 14087, -21166, 31989, -31736, -30238, 19996, 23640, 4353, 16697, 1282, 5644, -20321, 226, -29508, -29167, -10828, 8601, 25756, 11393, 12173, 12861, 19701, 10552, 1309, -11056, 28528, -16658, 736, 15790, -16152, 22707, 2507, 26948, -9809, 28604, 28104, 5762, -26167, -8747, -14728, -15368, -17968, -32767, 25823, -3055, 5152, -12116, 32460, 31795, 30524, 10924, 14860, -10904, 1496, -14892, 14349, 18267, -27527, -18294, -19452, 8154, 14797, 21970, -31612, -19572, -2030, -7990, -10487, -28658, 17171, -6395, 11452, 3356, -29472, -12649, 30583, 28351, -8014, 7731, 4109, 21720, 30074, -27892, 25496, 4103, -20083, -18302, 13520, 6357, 5670, 30783, 5371, -26296, -21906, -26145, -23244, 11273, 9189, -8381, -22151, -7259, 19710, -6584, 16763, -13456, 9199, 25304, -19078, -1290, -25429, -24156, -28648, -27643, 8341, -5825, 9106, 23428, 17318, 31287, 18498, 28621, 15713, -16189, 14406, 12715, 17959, 16243, -11933, 685, 17942, 4784, 29821, -21580, 26758, 16572, -14049, 8371, -2442, -24348, 3244, 30850, -3801, 5977, -25562, -19722, -22145, -30430, -14933, -17732, -9294, -24026, 32761, 888, -7369, -16436, -8886, -6632, 28011, -297, 7174, -32537, 5764, 18231, 10328, 1860, 21405, 30385, -12239, 19520, -14115, -31875, -26667, -11254, -12775, -31669, -22195, -3680, 17528, 11909, 14096, -2642, 27549, 32127, 28425, -2528, 26606, -7461, 6768, 3963, 22724, -14139, 10731, 6719, 10280, -12488, -11062, -20487, -26237, -14024, -9539, 2349, 32251, -31002, 13767, 26621, 24037, -25023, 29914, -3883, 24690, 23979, -9517, 8617, 23953, -31474, -27806, -8100, -23050, -30613, 18545, -11351, 20860, -21445, 11572, 24679, 16897, -17765, -9268, -8991, -15280, -10690, -27139, -3182, -2978, -30945, 9008, -28946, -21736, 12134, 3585, -32457, -13924, -8107, -23227, -27956, -2579, -8516, 21326, 2466, 20863, -2603, -31931, -32526, -21931, -8808, 14338, -22378, -14536, 9523, -13982, -11700, -22641, -7381, 26002, 25479, -6990, 11529, -16281, 29567, 8192, -19255, -25648, 4326, -14827, -28177, -22442, -29599, 11885, 18513, 20196, -15437, 26013, 7095, -31907, -10248, 2212, 8395, -3499, 20441, -23337, 31199, 21930, -10506, 7637, -12894, -26991, 1414, 21373, 17341, 29413, -10937, -7244, -22970, -10926, 3527, 3304, -22312, -25160, -6666, 21774, -20697, 51, -24553, 23958, 17520, 4228, -7256, -648, 25422, 26614, -105, 1920, 26920, 5164, 18121, 10604, -1993, -18413, 6740, -20746, -19875, 23785, -24597, 9565, -4118, 7398, 15604, -12925, -30030, 22045, -8587, 10601, 26001, -14843, 32715, 21969, 19143, 10290, 2869, -7445, 21172, 6264, 18505, 32043, 18940, 23189, -945, 24558, -10917, -19363, -370, -30803, 21524, -15490, 11663, 19309, 11948, 9906, -17258, -1484, 28676, -17011, -19113, -14950, 18123, -11077};

    public short [] autotuneSound = SHORTCHIRPFORWARD;
    public short [] beepbeepSound = SHORTCHIRP;
    public short [] sound = beepbeepSound;

    int buffsize, spaceCounter;
    final static String TAG = "Player";
    public AudioTrack audioTrack;
    boolean isRunning = false, silenceOverride = false;
    int MAXCHIRPS = 100;
    MainActivity myActivity;
    boolean maxPlayOverride = false;
    public int chirpPlayCount = 0;
    public boolean countMode = false;
    boolean scheduleTurnOn = false;

    int SPACE;

    public Player(MainActivity myActivity) {
        spaceCounter = SPACE;
        this.myActivity = myActivity;
        AudioManager am = (AudioManager) myActivity.getSystemService(Context.AUDIO_SERVICE);
        am.setStreamVolume(am.STREAM_MUSIC, am.getStreamMaxVolume(am.STREAM_MUSIC), 0);
    }

    public void changeSound (final short [] newSound) {
        sound = newSound;
        myActivity.runOnUiThread(new Runnable () {
            @Override
            public void run () {
                Toast.makeText(myActivity, "Changed sound to " + newSound.hashCode(), Toast.LENGTH_LONG).show();
            }
        });
    }

    public void setSpace (int new_space) { SPACE = new_space; }
    public int getSpace () { return SPACE; }
    public void turnOffSound (boolean value) {
        silenceOverride = value;
    }
    public void chirp () {
        maxPlayOverride = false;
        scheduleTurnOn = true;
    }

    public void stopChirp () { silenceOverride = true; }
    public boolean isSoundOn () { return !silenceOverride; }
    public void setSoftwareVolume (double softwareVolume) {
        AudioManager am = (AudioManager) myActivity.getSystemService(Context.AUDIO_SERVICE);
        int maxVol = am.getStreamMaxVolume(am.STREAM_MUSIC);
        int setVolume = (int) (((float)maxVol) * softwareVolume);
        am.setStreamVolume(am.STREAM_MUSIC, setVolume, 0);
    }


    public void startPlaying () {
        // Set up audiotrack, start playing on loop until time to stop

        buffsize = AudioTrack.getMinBufferSize(44100, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);
        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, buffsize, AudioTrack.MODE_STREAM);
        audioTrack.play();
        isRunning = true;

        new Thread(new Runnable() {
            @Override
            public void run() {
                android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
                playLoop();
            }
        }).start();
    }

    public void stopPlaying() {
        isRunning = false;
        if (audioTrack != null) {
            audioTrack.stop();
            audioTrack.release();
        }
    }

    public void playLoop() {
        short samples [] = new short[buffsize];
        int chirpCount = 0;
        chirpPlayCount = 0;
        boolean inChirp = true; short sample;

        while (isRunning) {

            for (int i = 0; i < buffsize; i++) {
                if (inChirp) {
                    if (silenceOverride) samples[i] = 0;
                    else if (maxPlayOverride) samples[i] = 0;
                    else samples[i] = sound[chirpCount];

                    chirpCount++; // Always increment, so it stays in sync

                    if (chirpCount >= sound.length) { // The last one, next would overflow
                        if (silenceOverride == false && maxPlayOverride == false) {
                            chirpPlayCount++;
                            Log.v(TAG, "Played " + chirpPlayCount);
                        }
                        inChirp = false;
                        chirpCount = 0;
                    }
                } else {
                    spaceCounter--;
                    samples[i] = 0;
                    if (spaceCounter <= 0) inChirp = true;

                    if (spaceCounter <= 0) {
                        if (scheduleTurnOn) {
                            silenceOverride = false;
                            scheduleTurnOn = false;
                        }

                        if (countMode && chirpPlayCount >= MAXCHIRPS) {
                            maxPlayOverride = true;
                        }

                        spaceCounter = SPACE;
                    }
                }
            }

            audioTrack.write(samples, 0, buffsize);
        }
    }
}
